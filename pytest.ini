[tool:pytest]
# Test Discovery
testpaths = grimperium/tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Output and Reporting
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --maxfail=10
    --durations=10
    --cov=grimperium
    --cov-report=xml
    --cov-report=html
    --cov-report=term-missing
    --cov-branch
    --cov-fail-under=75
    --junitxml=pytest-report.xml

# Test Markers
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    benchmark: marks tests as performance benchmarks
    external: marks tests that require external dependencies
    mock: marks tests that use mocking extensively
    database: marks tests that interact with database files
    config: marks tests related to configuration management
    pipeline: marks tests for the processing pipeline
    pubchem: marks tests that interact with PubChem API (requires network)

# Coverage Settings
# Note: Additional coverage settings in pyproject.toml take precedence
# This is a fallback for environments without pyproject.toml support

# Filtering and Warnings
filterwarnings =
    error
    ignore::UserWarning
    ignore::DeprecationWarning:pytest_cov.*
    ignore::PendingDeprecationWarning
    # Ignore specific warnings from dependencies
    ignore:.*imp module is deprecated.*:DeprecationWarning
    ignore:.*datetime.datetime.utcnow.*:DeprecationWarning

# Console Output
console_output_style = progress
junit_family = xunit2

# Parallel Execution Support
# When using pytest-xdist with -n auto
# Tests should be designed to be independent